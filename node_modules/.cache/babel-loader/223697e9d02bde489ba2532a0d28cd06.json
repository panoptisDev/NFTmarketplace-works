{"ast":null,"code":"var _jsxFileName = \"/home/koko/NFTmarketplace-works/src/components/nft-detail/nft-detail.js\";\nimport React, { Component } from 'react';\nimport ImageContract from '../../abis/ImageContract.json';\nimport ImageSaleContract from '../../abis/ImageSaleContract.json';\nimport TokenContract from '../../abis/TokenContract.json';\nimport TokenSaleContract from '../../abis/TokenSaleContract.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Mint extends Component {\n  render() {\n    const nft_id_path = window.location.pathname.split('/');\n    const key = nft_id_path[nft_id_path.length - 1];\n    // console.log(key)\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"head-title col-auto mx-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"mb-0 font-weight-normal\",\n          children: \"NFT Detail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nft-detail-adj\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-around\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-250\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"main\",\n                className: \"homeimage shadow-lg rounded\",\n                src: localStorage.getItem(this.state.imageData_name[key])\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 24,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 23,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-adj\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-responsive\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-sm table-borderless table-hover\",\n                  children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    className: \"\",\n                    children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"pl-0 w-40\",\n                        scope: \"row\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Name\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 34,\n                          columnNumber: 87\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 34,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.state.imageData_name[key]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 35,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 33,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"pl-0 w-40\",\n                        scope: \"row\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Owner\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 38,\n                          columnNumber: 87\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 38,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.state.owners[key]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 40,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 37,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"pl-0 w-40\",\n                        scope: \"row\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Url\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 45,\n                          columnNumber: 87\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 45,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.state.imageData_url[key]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 46,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 44,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"pl-0 w-40\",\n                        scope: \"row\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Description\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 49,\n                          columnNumber: 87\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 49,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: this.state.imageData_des[key]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 50,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 48,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 32,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 31,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 30,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 29,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center align-items-center my-1\",\n              children: !this.state.approved[key] && this.state.owners[key] === this.state.account ? /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: event => {\n                  event.preventDefault();\n                  this.approveNFT(key);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-75 my-1\",\n                    children: \"Price in ETK -\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 66,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control mx-1\",\n                    placeholder: \"New Price in ETK\",\n                    defaultValue: this.state.imageData_price[key],\n                    onChange: event => this.setState({\n                      new_price: event.target.value\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 67,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"submit\",\n                    className: \"btn btn-block btn-primary rounded-0 mx-1\",\n                    value: \"Approve for Sale\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 45\n              }, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mx-2\",\n                children: this.state.approved[key] && this.state.owners[key] !== this.state.account ? /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: event => {\n                    event.preventDefault();\n                    this.buyEtk(key);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-block btn-primary rounded-0 text-dark\",\n                    children: [\"Buy - \" + this.state.imageData_price[key], /*#__PURE__*/_jsxDEV(\"img\", {\n                      alt: \"main\",\n                      className: \"eth-class\",\n                      src: \"../ebizcoin.png\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 102,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 49\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mx-2\",\n                children: this.state.approved[key] && this.state.owners[key] !== this.state.account ? /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: event => {\n                    event.preventDefault();\n                    this.buyEth(key);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-block btn-primary rounded-0 text-dark\",\n                    children: [\"Buy - \" + this.state.imageData_price[key] * this.state.token_price, /*#__PURE__*/_jsxDEV(\"img\", {\n                      alt: \"main\",\n                      className: \"eth-class\",\n                      src: \"../eth-logo.png\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 49\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center align-items-center my-1\",\n              children: !this.state.approved[key] && this.state.owners[key] !== this.state.account ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-danger\",\n                children: \"This NFT is not Approved by Owner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 45\n              }, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Transactions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-sm table-borderless\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Buyer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Price in ETK\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: this.state.transactions.slice(0).reverse().map((transaction, i) => {\n                return transaction._tokenId === key ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: transaction._buyer\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: transaction._price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 53\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 49\n                }, this) : null;\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 13\n    }, this);\n  }\n  constructor(props) {\n    super(props);\n    this.buyEth = key => {\n      const web3 = window.web3;\n      web3.eth.sendTransaction({\n        to: this.state.owners[key],\n        from: this.state.account,\n        value: web3.utils.toWei(this.state.imageData_price[key], \"ether\") * this.state.token_price\n      }).once('receipt', receipt => {\n        console.log(\"ether transfered\");\n        this.state.sale_contract.methods.buyImage(this.state.owners[key], key, this.state.imageData_price[key]).send({\n          from: this.state.account\n        }).once('receipt', receipt => {\n          console.log(\"nft bought\");\n        });\n      });\n    };\n    this.buyEtk = key => {\n      const web3 = window.web3;\n      this.state.token_contract.methods.transfer(this.state.owners[key], web3.utils.toWei(this.state.imageData_price[key], \"ether\")).send({\n        from: this.state.account\n      }).once('receipt', receipt => {\n        console.log(\"tokens transfered\");\n        this.state.sale_contract.methods.buyImage(this.state.owners[key], key, this.state.imageData_price[key]).send({\n          from: this.state.account\n        }).once('receipt', receipt => {\n          console.log(\"nft bought\");\n        });\n      });\n    };\n    this.approveNFT = key => {\n      if (this.state.new_price == null) {\n        this.setState({\n          new_price: this.state.imageData_price[key]\n        });\n      }\n      this.state.contract.methods.updatePrice(key, this.state.new_price).send({\n        from: this.state.account\n      }).once('receipt', receipt => {\n        console.log(\"price updated\");\n        this.state.contract.methods.approveNFT(this.state.sale_contract._address, key).send({\n          from: this.state.account\n        }).once('receipt', receipt => {\n          console.log(\"nft approved for sale\");\n        });\n      });\n    };\n    this.state = {\n      account: '',\n      contract: null,\n      sale_contract: null,\n      token_contract: null,\n      token_sale_contract: null,\n      totalSupply: 0,\n      token_price: 0,\n      images: [],\n      owners: [],\n      imageData_name: [],\n      imageData_price: [],\n      imageData_des: [],\n      imageData_url: [],\n      selling_to: '',\n      selling_price: null,\n      approved: [],\n      new_price: null,\n      transactions: []\n    };\n  }\n  async componentWillMount() {\n    await this.loadBlockchainData();\n  }\n  async loadBlockchainData() {\n    const web3 = window.web3;\n    // Load account\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    const networkId = await web3.eth.net.getId();\n    const networkData = ImageContract.networks[networkId];\n    if (networkData) {\n      const abi = ImageContract.abi;\n      const address = networkData.address;\n      const contract = new web3.eth.Contract(abi, address);\n      console.log(contract);\n      // console.log(await contract.getPastEvents('Transfer', { fromBlock: 0, toBlock: 'latest' }))\n\n      this.setState({\n        contract\n      });\n      const totalSupply = await contract.methods.totalSupply().call();\n      // console.log(totalSupply)\n      this.setState({\n        totalSupply\n      });\n\n      // Load NFTs\n      for (var i = 1; i <= totalSupply; i++) {\n        const id = await contract.methods.images(i - 1).call();\n        // console.log(id)\n        this.setState({\n          images: [...this.state.images, id]\n        });\n      }\n      // Load Owner\n      for (i = 1; i <= totalSupply; i++) {\n        const owner = await contract.methods.ownerOf(i - 1).call();\n        // console.log(owner)\n        this.setState({\n          owners: [...this.state.owners, owner]\n        });\n      }\n      // Load NFTs Data \n      for (i = 1; i <= totalSupply; i++) {\n        const metadata = await contract.methods.imageData(i - 1).call();\n        // console.log(metadata)\n        this.setState({\n          imageData_name: [...this.state.imageData_name, metadata.name],\n          imageData_price: [...this.state.imageData_price, metadata.price],\n          imageData_des: [...this.state.imageData_des, metadata.description],\n          imageData_url: [...this.state.imageData_url, metadata.url]\n        });\n      }\n    } else {\n      window.alert('Smart contract not deployed to detected network.');\n    }\n    const sale_networkData = ImageSaleContract.networks[networkId];\n    if (sale_networkData) {\n      const sale_abi = ImageSaleContract.abi;\n      const sale_address = sale_networkData.address;\n      const sale_contract = new web3.eth.Contract(sale_abi, sale_address);\n      this.setState({\n        sale_contract\n      });\n\n      // console.log(sale_contract)\n      const transactions = await sale_contract.getPastEvents('BoughtNFT', {\n        fromBlock: 0,\n        toBlock: 'latest'\n      });\n      // console.log(transactions)\n\n      for (i = 0; i < transactions.length; i++) {\n        this.setState({\n          transactions: [...this.state.transactions, transactions[i].returnValues]\n        });\n      }\n      for (i = 1; i <= this.state.totalSupply; i++) {\n        var approv = await this.state.contract.methods.isApprovedOrOwner(this.state.sale_contract._address, i - 1).call();\n        this.setState({\n          approved: [...this.state.approved, approv]\n        });\n\n        // console.log(approv);\n      }\n    } else {\n      window.alert('Smart contract not deployed to detected network.');\n    }\n    const token_networkData = TokenContract.networks[networkId];\n    if (token_networkData) {\n      const abi = TokenContract.abi;\n      const address = token_networkData.address;\n      const token_contract = new web3.eth.Contract(abi, address);\n      this.setState({\n        token_contract\n      });\n      // console.log(await token_contract.methods.totalSupply().call())\n    } else {\n      window.alert('Smart contract not deployed to detected network.');\n    }\n    const token_sale_networkData = TokenSaleContract.networks[networkId];\n    if (token_sale_networkData) {\n      const abi = TokenSaleContract.abi;\n      const address = token_sale_networkData.address;\n      const token_sale_contract = new web3.eth.Contract(abi, address);\n      this.setState({\n        token_sale_contract\n      });\n      // console.log(token_sale_contract)\n\n      var token_price = await this.state.token_sale_contract.methods.tokenPrice().call();\n      this.setState({\n        token_price: web3.utils.fromWei(token_price, \"ether\")\n      });\n    } else {\n      window.alert('Smart contract not deployed to detected network.');\n    }\n  }\n}\nexport default Mint;","map":{"version":3,"names":["React","Component","ImageContract","ImageSaleContract","TokenContract","TokenSaleContract","Mint","render","nft_id_path","window","location","pathname","split","key","length","localStorage","getItem","state","imageData_name","owners","imageData_url","imageData_des","approved","account","event","preventDefault","approveNFT","imageData_price","setState","new_price","target","value","buyEtk","buyEth","token_price","transactions","slice","reverse","map","transaction","i","_tokenId","_buyer","_price","constructor","props","web3","eth","sendTransaction","to","from","utils","toWei","once","receipt","console","log","sale_contract","methods","buyImage","send","token_contract","transfer","contract","updatePrice","_address","token_sale_contract","totalSupply","images","selling_to","selling_price","componentWillMount","loadBlockchainData","accounts","getAccounts","networkId","net","getId","networkData","networks","abi","address","Contract","call","id","owner","ownerOf","metadata","imageData","name","price","description","url","alert","sale_networkData","sale_abi","sale_address","getPastEvents","fromBlock","toBlock","returnValues","approv","isApprovedOrOwner","token_networkData","token_sale_networkData","tokenPrice","fromWei"],"sources":["/home/koko/NFTmarketplace-works/src/components/nft-detail/nft-detail.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport ImageContract from '../../abis/ImageContract.json';\r\nimport ImageSaleContract from '../../abis/ImageSaleContract.json';\r\nimport TokenContract from '../../abis/TokenContract.json';\r\nimport TokenSaleContract from '../../abis/TokenSaleContract.json';\r\n\r\nclass Mint extends Component {\r\n\r\n    render() {\r\n\r\n        const nft_id_path = window.location.pathname.split('/')\r\n        const key = nft_id_path[nft_id_path.length - 1]\r\n        // console.log(key)\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"head-title col-auto mx-4\">\r\n                    <h4 className=\"mb-0 font-weight-normal\">NFT Detail</h4>\r\n                </div>\r\n                <div className=\"nft-detail-adj\">\r\n                    <div className=\"d-flex justify-content-around\">\r\n                        <div className=\"col-4\">\r\n                            <div className=\"max-250\">\r\n                                <img alt=\"main\" className=\"homeimage shadow-lg rounded\" src={localStorage.getItem(this.state.imageData_name[key])} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-8\">\r\n                            <div className=\"table-adj\">\r\n                                <div className=\"table-responsive\">\r\n                                    <table className=\"table table-sm table-borderless table-hover\">\r\n                                        <tbody className=\"\">\r\n                                            <tr>\r\n                                                <th className=\"pl-0 w-40\" scope=\"row\"><strong>Name</strong></th>\r\n                                                <td>{this.state.imageData_name[key]}</td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <th className=\"pl-0 w-40\" scope=\"row\"><strong>Owner</strong></th>\r\n                                                {/* <td>{this.state.owners[key]}</td> */}\r\n                                                <td>{\r\n                                                    this.state.owners[key]\r\n                                                }</td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <th className=\"pl-0 w-40\" scope=\"row\"><strong>Url</strong></th>\r\n                                                <td>{this.state.imageData_url[key]}</td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <th className=\"pl-0 w-40\" scope=\"row\"><strong>Description</strong></th>\r\n                                                <td>{this.state.imageData_des[key]}</td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"d-flex justify-content-center align-items-center my-1\">\r\n                                {\r\n                                    (!this.state.approved[key] && (this.state.owners[key] === this.state.account)) ?\r\n                                        (\r\n                                            <form onSubmit={(event) => {\r\n                                                event.preventDefault()\r\n                                                this.approveNFT(key);\r\n                                            }}>\r\n                                                <div className=\"d-flex\">\r\n                                                    <div className=\"w-75 my-1\">Price in ETK -</div>\r\n                                                    <input\r\n                                                        type='text'\r\n                                                        className='form-control mx-1'\r\n                                                        placeholder='New Price in ETK'\r\n                                                        defaultValue={this.state.imageData_price[key]}\r\n                                                        onChange={event => this.setState({ new_price: event.target.value })}\r\n                                                    />\r\n                                                    <input\r\n                                                        type='submit'\r\n                                                        className='btn btn-block btn-primary rounded-0 mx-1'\r\n                                                        value={\"Approve for Sale\"}\r\n                                                    />\r\n                                                </div>\r\n                                            </form>\r\n                                        )\r\n                                        : null\r\n                                }\r\n                            </div>\r\n\r\n                            <div className=\"d-flex justify-content-center align-items-center\">\r\n                                <div className=\"mx-2\">\r\n                                    {\r\n                                        (this.state.approved[key] && (this.state.owners[key] !== this.state.account)) ?\r\n                                            (\r\n                                                <form onSubmit={(event) => {\r\n                                                    event.preventDefault()\r\n                                                    this.buyEtk(key);\r\n                                                }}>\r\n                                                    {/* <input\r\n                                                type='submit'\r\n                                                className='btn btn-block btn-primary rounded-0'\r\n                                                value={\"Buy - \" + this.state.imageData_price[key] + \" ETK\"}\r\n                                            /> */}\r\n                                                    <button type=\"submit\" className='btn btn-block btn-primary rounded-0 text-dark'>\r\n                                                        {\"Buy - \" + this.state.imageData_price[key]}\r\n                                                        <img alt=\"main\" className=\"eth-class\" src=\"../ebizcoin.png\" />\r\n                                                    </button>\r\n                                                </form>\r\n                                            )\r\n                                            : null\r\n                                    }\r\n                                </div>\r\n\r\n                                <div className=\"mx-2\">\r\n                                    {\r\n                                        (this.state.approved[key] && (this.state.owners[key] !== this.state.account)) ?\r\n                                            (\r\n                                                <form onSubmit={(event) => {\r\n                                                    event.preventDefault()\r\n                                                    this.buyEth(key);\r\n                                                }}>\r\n                                                    {/* <input\r\n                                                type='submit'\r\n                                                className='btn btn-block btn-primary rounded-0'\r\n                                                value={\"Buy - \" + (this.state.imageData_price[key] * this.state.token_price) + \" ETH\"}\r\n                                            /> */}\r\n                                                    <button type=\"submit\" className='btn btn-block btn-primary rounded-0 text-dark'>\r\n                                                        {\"Buy - \" + (this.state.imageData_price[key] * this.state.token_price)}\r\n                                                        <img alt=\"main\" className=\"eth-class\" src=\"../eth-logo.png\" />\r\n                                                    </button>\r\n                                                </form>\r\n                                            )\r\n                                            : null\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"d-flex justify-content-center align-items-center my-1\">\r\n                                {\r\n                                    (!this.state.approved[key] && (this.state.owners[key] !== this.state.account)) ?\r\n                                        (\r\n                                            <div className=\"text-danger\">{\"This NFT is not Approved by Owner\"}</div>\r\n                                        )\r\n                                        : null\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4\">\r\n                        <h5>Transactions</h5>\r\n                        <table className=\"table table-sm table-borderless\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Buyer</th>\r\n                                    <th>Price in ETK</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.transactions.slice(0).reverse().map((transaction, i) => {\r\n                                    return (\r\n                                        (transaction._tokenId === key) ?\r\n                                            (\r\n                                                <tr key={i}>\r\n                                                    <td>{transaction._buyer}</td>\r\n                                                    <td>{transaction._price}</td>\r\n                                                </tr>\r\n                                            ) : null\r\n                                    )\r\n                                })\r\n                                }\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            account: '',\r\n            contract: null,\r\n            sale_contract: null,\r\n            token_contract: null,\r\n            token_sale_contract: null,\r\n            totalSupply: 0,\r\n            token_price: 0,\r\n            images: [],\r\n            owners: [],\r\n            imageData_name: [],\r\n            imageData_price: [],\r\n            imageData_des: [],\r\n            imageData_url: [],\r\n            selling_to: '',\r\n            selling_price: null,\r\n            approved: [],\r\n            new_price: null,\r\n            transactions: []\r\n        }\r\n    }\r\n\r\n    async componentWillMount() {\r\n        await this.loadBlockchainData()\r\n    }\r\n\r\n    async loadBlockchainData() {\r\n        const web3 = window.web3\r\n        // Load account\r\n        const accounts = await web3.eth.getAccounts()\r\n        this.setState({ account: accounts[0] })\r\n\r\n        const networkId = await web3.eth.net.getId()\r\n        const networkData = ImageContract.networks[networkId]\r\n        if (networkData) {\r\n            const abi = ImageContract.abi\r\n            const address = networkData.address\r\n            const contract = new web3.eth.Contract(abi, address)\r\n            console.log(contract)\r\n            // console.log(await contract.getPastEvents('Transfer', { fromBlock: 0, toBlock: 'latest' }))\r\n\r\n            this.setState({ contract })\r\n            const totalSupply = await contract.methods.totalSupply().call()\r\n            // console.log(totalSupply)\r\n            this.setState({ totalSupply })\r\n\r\n\r\n            // Load NFTs\r\n            for (var i = 1; i <= totalSupply; i++) {\r\n                const id = await contract.methods.images(i - 1).call()\r\n                // console.log(id)\r\n                this.setState({\r\n                    images: [...this.state.images, id]\r\n                })\r\n            }\r\n            // Load Owner\r\n            for (i = 1; i <= totalSupply; i++) {\r\n                const owner = await contract.methods.ownerOf(i - 1).call()\r\n                // console.log(owner)\r\n                this.setState({\r\n                    owners: [...this.state.owners, owner]\r\n                })\r\n            }\r\n            // Load NFTs Data \r\n            for (i = 1; i <= totalSupply; i++) {\r\n                const metadata = await contract.methods.imageData(i - 1).call()\r\n                // console.log(metadata)\r\n                this.setState({\r\n                    imageData_name: [...this.state.imageData_name, metadata.name],\r\n                    imageData_price: [...this.state.imageData_price, metadata.price],\r\n                    imageData_des: [...this.state.imageData_des, metadata.description],\r\n                    imageData_url: [...this.state.imageData_url, metadata.url]\r\n                })\r\n            }\r\n\r\n        } else {\r\n            window.alert('Smart contract not deployed to detected network.')\r\n        }\r\n\r\n        const sale_networkData = ImageSaleContract.networks[networkId]\r\n        if (sale_networkData) {\r\n            const sale_abi = ImageSaleContract.abi\r\n            const sale_address = sale_networkData.address\r\n            const sale_contract = new web3.eth.Contract(sale_abi, sale_address)\r\n            this.setState({ sale_contract })\r\n\r\n            // console.log(sale_contract)\r\n            const transactions = await sale_contract.getPastEvents('BoughtNFT', { fromBlock: 0, toBlock: 'latest' })\r\n            // console.log(transactions)\r\n\r\n            for (i = 0; i < transactions.length; i++) {\r\n                this.setState({ transactions: [...this.state.transactions, transactions[i].returnValues] })\r\n            }\r\n\r\n            for (i = 1; i <= this.state.totalSupply; i++) {\r\n\r\n                var approv = await this.state.contract.methods.isApprovedOrOwner(this.state.sale_contract._address, (i - 1)).call();\r\n                this.setState({ approved: [...this.state.approved, approv] })\r\n\r\n                // console.log(approv);\r\n            }\r\n\r\n        } else {\r\n            window.alert('Smart contract not deployed to detected network.')\r\n        }\r\n\r\n        const token_networkData = TokenContract.networks[networkId]\r\n        if (token_networkData) {\r\n            const abi = TokenContract.abi\r\n            const address = token_networkData.address\r\n            const token_contract = new web3.eth.Contract(abi, address)\r\n            this.setState({ token_contract })\r\n            // console.log(await token_contract.methods.totalSupply().call())\r\n\r\n        } else {\r\n            window.alert('Smart contract not deployed to detected network.')\r\n        }\r\n\r\n        const token_sale_networkData = TokenSaleContract.networks[networkId]\r\n        if (token_sale_networkData) {\r\n            const abi = TokenSaleContract.abi\r\n            const address = token_sale_networkData.address\r\n            const token_sale_contract = new web3.eth.Contract(abi, address)\r\n            this.setState({ token_sale_contract })\r\n            // console.log(token_sale_contract)\r\n\r\n            var token_price = await this.state.token_sale_contract.methods.tokenPrice().call();\r\n            this.setState({ token_price: web3.utils.fromWei(token_price, \"ether\") })\r\n\r\n        } else {\r\n            window.alert('Smart contract not deployed to detected network.')\r\n        }\r\n\r\n    }\r\n\r\n\r\n    buyEth = (key) => {\r\n        const web3 = window.web3\r\n        web3.eth.sendTransaction({ to: this.state.owners[key], from: this.state.account, value: web3.utils.toWei(this.state.imageData_price[key], \"ether\") * this.state.token_price })\r\n            .once('receipt', (receipt) => {\r\n                console.log(\"ether transfered\")\r\n\r\n                this.state.sale_contract.methods.buyImage(this.state.owners[key], key, this.state.imageData_price[key]).send({ from: this.state.account })\r\n                    .once('receipt', (receipt) => {\r\n                        console.log(\"nft bought\")\r\n                    })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    buyEtk = (key) => {\r\n        const web3 = window.web3\r\n        this.state.token_contract.methods.transfer(\r\n            this.state.owners[key],\r\n            web3.utils.toWei(this.state.imageData_price[key], \"ether\")\r\n        ).send({ from: this.state.account, })\r\n            .once('receipt', (receipt) => {\r\n                console.log(\"tokens transfered\")\r\n\r\n                this.state.sale_contract.methods.buyImage(this.state.owners[key], key, this.state.imageData_price[key]).send({ from: this.state.account })\r\n                    .once('receipt', (receipt) => {\r\n                        console.log(\"nft bought\")\r\n                    })\r\n            })\r\n\r\n    }\r\n\r\n    approveNFT = (key) => {\r\n\r\n        if (this.state.new_price == null) {\r\n            this.setState({ new_price: this.state.imageData_price[key] });\r\n        }\r\n\r\n        this.state.contract.methods.updatePrice(\r\n            key, this.state.new_price\r\n        ).send({ from: this.state.account })\r\n            .once('receipt', (receipt) => {\r\n                console.log(\"price updated\");\r\n\r\n                this.state.contract.methods.approveNFT(\r\n                    this.state.sale_contract._address, key\r\n                ).send({ from: this.state.account })\r\n                    .once('receipt', (receipt) => {\r\n                        console.log(\"nft approved for sale\");\r\n                    });\r\n            });\r\n\r\n    }\r\n\r\n}\r\nexport default Mint;"],"mappings":"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"},"metadata":{},"sourceType":"module"}